apiVersion: skaffold/v2beta11
kind: Config
deploy:
  helm:
    releases:
      - name: runhub-crds
        chartPath: charts/runhub-crds
        namespace: dev-runhub
        createNamespace: true
        setValues:
          global.environment.dev: true
        skipBuildDependencies: true
        wait: true
      - name: app
        chartPath: charts/runhub
        namespace: dev-runhub
        setValues:
          global.environment.dev: true
        valuesFiles:
          - values-development.yaml
          - values-shared.yaml
        skipBuildDependencies: true
      - name: runhub-crds
        chartPath: charts/runhub-crds
        namespace: prod-runhub
        createNamespace: true
        setValues:
          global.environment.prod: true
          cert-manager-crds.enabled: false
          knative-crds.enabled: false
        skipBuildDependencies: true
        wait: true
      - name: app
        chartPath: charts/runhub
        namespace: prod-runhub
        setValues:
          global.environment.prod: true
          cert-manager.enabled: false
          knative.enabled: false
        valuesFiles:
          - values-shared.yaml
        skipBuildDependencies: true
